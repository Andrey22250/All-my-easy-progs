#define _CRT_SECURE_NO_WARNINGS
#include <iostream>
#include <conio.h>
#include <windows.h>
#define password 22032004	//Пароль администратора

int main()
{
	int a, c, d, e, f, g, h;
	long int b;
	setlocale(LC_ALL, "rus");
	//Правила тестирования
	printf("Тестирование по теме: «Программирование» \nОсновные правила тестирования:\n\
1. Ответ в первых 4 вопросах - цифра от 1 до 5\n2. Если ваш ответ цифра не от 1 до 5 - баллы сниматься не будут\
	\n3. В пятом вопросе ответ - число. Ошибка в этом вопросе снимает баллы в любом случае\n\n");
	do
	{
		h = 0;
		c = 0;
		printf("Выберите режим тестирования:\n1 - Администратор\n2 - Пользователь\nРежим: ");
		scanf("%d", &a);
		if (a != 1 && a != 2)
			printf("\nВведено неверное значение\n\nНажмите Enter для повторного ввода\
			\nНажмите Esc для выхода из программы\n\n");
		else
		{
			//Вход в режим администратора
			if (a == 1)
			{
				do
				{
					printf("\nВведите пароль администратора: ");
					scanf("%d", &b);
					if (b != password)
						printf("Введён неверный пароль\n\nНажмите Enter для повторного ввода\
						\nНажмите Esc для запуска в режиме пользователя\n");
					else
					{
						c = 1;
						printf("Верный пароль. Ответы будут указаны в скобках\n");
						break;
					}
				} while (_getch() != 27);

			}
			// Вопрос 1
			e = 3;
			f = 0;
			while (e > 0 && f != 1)
			{
				Sleep(1000);
				printf("\n1. Какой тип данных используется для целых чисел?\
				\n  1. Char\n  2. Int\n  3. Float\n  4. Double\n  5. Void\n\nВаш ответ: ");
				if (c)
				{
					printf("(Ответ: 2) ");
				}
				scanf("%d", &d);
				switch (d)
				{
				case 2:
				{
					printf("Правильный ответ\n");
					f = 1;
				}
				break;
				case 1:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 3:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 4:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 5:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				default: printf("Введено неверное значение, повторите попытку\n"); break;
				}
			}
			h = h + e;
			// Вопрос 2
			e = 3;
			f = 0;
			while (e > 0 && f != 1)
			{
				Sleep(1000);
				printf("\n2. С помощью какой буквы в escape-последовательности выполняется переход на новую строку?\
				\n  1. a\n  2. b\n  3. f\n  4. n\n  5. v\n\nВаш ответ: ");
				if (c)
				{
					printf("(Ответ: 4) ");
				}
				scanf("%d", &d);
				switch (d)
				{
				case 4:
				{
					printf("Правильный ответ\n");
					f = 1;
				}
				break;
				case 1:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 2:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 3:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 5:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				default: printf("Введено неверное значение, повторите попытку"); break;
				}
			}
			h = h + e;
			// Вопрос 3
			e = 3;
			f = 0;
			while (e > 0 && f != 1)
			{
				Sleep(1000);
				printf("\n3. Какой символ спецификации формата в printf выводит целое число в 16-ричном формате?\
				\n  1. o\n  2. d\n  3. u\n  4. i\n  5. x\n\nВаш ответ: ");
				if (c)
				{
					printf("(Ответ: 5) ");
				}
				scanf("%d", &d);
				switch (d)
				{
				case 5:
				{
					printf("Правильный ответ\n");
					f = 1;
				}
				break;
				case 1:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 2:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 3:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 4:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				default: printf("Введено неверное значение, повторите попытку"); break;
				}
			}
			h = h + e;
			// Вопрос 4
			e = 3;
			f = 0;
			while (e > 0 && f != 1)
			{
				Sleep(1000);
				printf("\n4. Какая из данных операций имеет значение “логическое ИЛИ”?\
				\n  1. &&\n  2. <=\n  3. ||\n  4. !\n  5. !=\n\nВаш ответ: ");
				if (c)
				{
					printf("(Ответ: 3) ");
				}
				scanf("%d", &d);
				switch (d)
				{
				case 3:
				{
					printf("Правильный ответ\n");
					f = 1;
				}
				break;
				case 1:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 2:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 4:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				case 5:printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				default: printf("Введено неверное значение, повторите попытку"); break;
				}
			}
			h = h + e;
			// Вопрос 5
			e = 3;
			f = 0;
			while (e > 0 && f != 1)
			{
				Sleep(1000);
				printf("\n5. Дано выражение “y=++x”, где начальный x=5. Чему равен y?\
				\n(Внимание! Ответ указывается числом. Ошибка в этом вопросе снимает баллы.)\nВаш ответ: ");
				if (c)
				{
					printf("(Ответ: 6) ");
				}
				scanf("%d", &d);
				switch (d)
				{
				case 6:
				{
					printf("Правильный ответ\n");
					f = 1;
				}
				break;
				default: printf("Неверный ответ,осталось попыток: %d \n", --e); break;
				}
			}
			h = h + e;
			Sleep(1000);
			//Вывод итогового балла
			printf("\nВаш итоговый балл: %d\n\nНажмите Enter для повторного тестирования\
			\nНажмите Esc для выхода из тестирования\n\n", h);
		}
	} while (_getch() != 27);
}